<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WalletConnect v2 Test</title>
  <script src="https://unpkg.com/@walletconnect/ethereum-provider@2.9.4/dist/umd/index.min.js"></script>
</head>
<body>
  <button id="connectButton">Connect Wallet</button>

  <script>
    const INFURA_PROJECT_ID = "4aa83a1a6d3c4b318c210e38243466c9";
    const WALLETCONNECT_PROJECT_ID = "b49de02b26fcb4c1ad6f4fb0dbd9caff";

    const EthereumProvider = window.WalletConnectEthereumProvider.EthereumProvider;

    document.getElementById('connectButton').onclick = async () => {
      console.log("Button clicked!");

      try {
        const provider = await EthereumProvider.init({
          projectId: WALLETCONNECT_PROJECT_ID,
          chains: [11155111], // Sepolia chainId
          showQrModal: true,
          rpcMap: {
            11155111: `https://sepolia.infura.io/v3/${INFURA_PROJECT_ID}`
          }
        });

        provider.on("connect", (info) => {
          console.log("Connected:", info);
          alert("Wallet connected successfully!");
        });

        provider.on("disconnect", (error) => {
          console.log("Disconnected:", error);
          alert("Wallet disconnected");
        });

        await provider.enable();
      } catch (err) {
        console.error("Error connecting wallet:", err);
        alert("Failed to connect wallet: " + err.message);
      }
    };
  </script>
</body>
</html>
